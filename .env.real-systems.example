# Real PLM/Athena System Integration Configuration
# Copy this file to .env.real-systems and fill in your actual credentials

# ============================================
# PLM System Configuration
# ============================================

# PLM Base URL (without trailing slash)
# Example: https://plm.company.com or http://plm-server:8080
PLM_BASE_URL=

# PLM API Mode (auto|legacy|yuantus)
PLM_API_MODE=yuantus

# PLM tenant/org headers (required for Yuantus)
PLM_TENANT_ID=
PLM_ORG_ID=

# PLM Authentication Token
# For Yuantus, token is optional if PLM_USERNAME/PLM_PASSWORD are set.
PLM_API_TOKEN=

# PLM username/password (used for Yuantus login when token is missing)
PLM_USERNAME=plm_reader
PLM_PASSWORD=plm_reader_2025

# PLM item type (used for Yuantus item queries)
# Example: Part, Assembly
PLM_ITEM_TYPE=Part

# PLM write credentials (used by scripts/seed-plm-baseline.sh)
# Leave empty if you don't need to create BOM baseline data.
PLM_WRITE_USERNAME=
PLM_WRITE_PASSWORD=

# Yuantus login example:
# curl -X POST http://127.0.0.1:7910/api/v1/auth/login \
#   -H "Content-Type: application/json" \
#   -d '{"tenant_id":"tenant-1","username":"plm_reader","password":"plm_reader_2025","org_id":"org-1"}'

# ============================================
# Athena ECM System Configuration
# ============================================

# Athena Base URL (without trailing slash)
# Example: https://athena.company.com or http://athena-server:9090
ATHENA_BASE_URL=

# Athena Authentication Token
# Generate from Athena system admin panel
ATHENA_API_TOKEN=

# Athena API Version (optional, defaults to v1)
ATHENA_API_VERSION=v1

# Keycloak (optional, used for automatic Athena token refresh)
KEYCLOAK_URL=http://localhost:8180
KEYCLOAK_REALM=ecm
KEYCLOAK_CLIENT_ID=unified-portal
# KEYCLOAK_CLIENT_SECRET=
KEYCLOAK_USER=admin
KEYCLOAK_PASSWORD=admin

# ============================================
# Test Configuration
# ============================================

# Test timeout in milliseconds (default: 30000)
TEST_TIMEOUT=30000

# Skip Athena checks if not available
SKIP_ATHENA=false

# Skip SSL certificate validation (only for testing, NOT for production)
# Set to 'true' only if testing with self-signed certificates
NODE_TLS_REJECT_UNAUTHORIZED=

# Verbose test output (set to 'true' for detailed logging)
TEST_VERBOSE=false

# ============================================
# MetaSheet2 Backend Configuration
# ============================================

# MetaSheet2 Backend URL (for integration tests)
METASHEET_BASE_URL=http://localhost:7778

# Admin API Token (if admin auth is enabled)
ADMIN_API_TOKEN=

# ============================================
# Validation Test Endpoints
# ============================================

# PLM Specific Endpoints to Test (comma-separated)
# Examples: /api/v1/parts,/api/v1/boms,/api/v1/search/
# You can use {parent_id} placeholder for BOM tree endpoints.
PLM_TEST_ENDPOINTS=/api/v1/search/?q=&item_type=Part&limit=1,/api/v1/bom/{parent_id}/tree?depth=2

# PLM BOM tree parent id (used to resolve {parent_id} placeholder)
PLM_BOM_ITEM_ID=

# Athena Specific Endpoints to Test (comma-separated)
# Examples: /api/v1/system/status,/api/v1/workflows/definitions
ATHENA_TEST_ENDPOINTS=/api/v1/system/status,/api/v1/workflows/definitions

# ============================================
# Expected Response Fields (for validation)
# ============================================

# PLM Part Fields (comma-separated, for field validation)
# Example (Yuantus search hit): id,item_number,name,state
PLM_PART_FIELDS=id,item_number,name,state

# PLM BOM Fields (comma-separated)
# Example (BOM tree root): children
PLM_BOM_FIELDS=children

# Athena Document Fields (comma-separated)
# Example: id,name,type,status,version
ATHENA_DOCUMENT_FIELDS=id,name,type,status,version

# Athena Workflow Fields (comma-separated)
# Example: id,key,name,version
ATHENA_WORKFLOW_FIELDS=id,key,name,version

# ============================================
# Sample Data for Write Tests (Optional)
# ============================================

# Test Part Number for PLM (will be created if write tests are enabled)
TEST_PART_NUMBER=TEST-PART-001

# Test Document Name for Athena
TEST_DOCUMENT_NAME=TEST-DOC-001

# Enable write tests (creates/updates/deletes test data)
# WARNING: Only enable on test environments!
ENABLE_WRITE_TESTS=false

# ============================================
# Report Configuration
# ============================================

# Output directory for test reports
REPORT_OUTPUT_DIR=reports

# Generate JSON report
GENERATE_JSON_REPORT=true

# Generate CSV report
GENERATE_CSV_REPORT=true

# Generate Markdown report
GENERATE_MD_REPORT=true
