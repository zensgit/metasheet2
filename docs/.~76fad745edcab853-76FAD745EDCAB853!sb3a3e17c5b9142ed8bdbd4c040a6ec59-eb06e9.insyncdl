# Metasheet v2 TODOs

本文件跟踪 v2/init 阶段的工作待办，按优先级划分。勾选表示已完成，若有 PR/Commit 可追加引用。

## 高优先级（P0）
- [ ] OpenAPI diff 增强：方法级删除与响应 Schema 破坏性检测
- [ ] 统一分页响应结构与错误体（{ ok, data|error }），补示例
- [ ] 审批历史与审计查询：参数校验（zod）与导出（CSV/NDJSON）
- [ ] Observability 阈值门禁：错误率/P99 上限、审批冲突占比上限
- [ ] 迁移与种子在 CI 的稳健性（空库全量回放，含 030/031/032/033/034/035/036）

## 中优先级（P1）
- [ ] roles/permissions/spreadsheets/files 的 OpenAPI 示例完善（请求/响应）
- [ ] RBAC 缓存（用户→角色→权限）+ 失效策略
- [ ] 审计表字段标准化与敏感字段脱敏策略
- [ ] 插件权限声明与平台侧授权审计（对接 rbacGuard）
- [ ] 并发冒烟脚本扩展：reject/return/revoke 均断言“≥1 成功 + ≥1 冲突”

## 低优先级（P2）
- [ ] 文件上传真实存储（S3/本地）与回源校验
- [ ] 事件/通知：审批状态变更事件落表与异步派发
- [ ] DB 指标：连接池等待时间、慢查询采样
- [ ] PM2/容器化部署脚本与健康探针（/health 扩展）

## 文档与脚本
- [ ] README（v2）补“本地验证指南”和常见问题（too many clients、端口占用）
- [ ] quick-verify 扩展更多端点与断言，汇总报告
- [ ] CI 文档：Observability 与 Migration Replay 工作流说明与失败排查手册

## 里程碑对齐
- [ ] M1 完成标准回顾与验收（审批并发+JWT+RBAC+审计+指标）
- [ ] M2 可观测性门禁落地与阈值调优
- [ ] M3 OpenAPI 完整度与发布工件流程固化

更新时间：2025-09-17

