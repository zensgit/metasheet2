# Sprint 8 æ‰§è¡Œ Checklist: å®æ—¶æ´å¯Ÿä¸é«˜çº§å¯é æ€§ (Real-time Insights & Reliability)

**Sprint å‘¨æœŸ**: 2025-12-12 ~ 2025-12-16
**çŠ¶æ€**: ğŸš€ è®¡åˆ’ä¸­

---

## ğŸ¯ æ ¸å¿ƒç›®æ ‡

1. **å®æ—¶å¯è§† (Real-time Visibility)**: é€šè¿‡ WebSocket å‘å‰ç«¯æ¨é€å®æ—¶æŒ‡æ ‡ï¼Œä¸å†ä¾èµ–è½®è¯¢ã€‚
2. **æ•°æ®ä¸€è‡´æ€§ (Data Integrity)**: å®ç°å¹‚ç­‰æ€§æœºåˆ¶ (Idempotency)ï¼Œé˜²æ­¢ç½‘ç»œé‡è¯•å¯¼è‡´çš„æ•°æ®é‡å¤ã€‚
3. **å‘å¸ƒå®‰å…¨ (Release Safety)**: å»ºç«‹é‡‘ä¸é›€å‘å¸ƒ (Canary Release) çš„åŸºç¡€è·¯ç”±èƒ½åŠ›ã€‚
4. **æ€§èƒ½æ´å¯Ÿ (Performance Insights)**: ç»†ç²’åº¦çš„ RPC å»¶è¿Ÿåˆ†å¸ƒç›‘æ§ã€‚

---

## ğŸ“‹ æ¯æ—¥è¿›åº¦è¿½è¸ª

### Day 1: WebSocket å®æ—¶æŒ‡æ ‡æµ (Real-time Metrics)
- [ ] **WebSocket æœåŠ¡å¢å¼º**: ç¡®ä¿ `WebSocketServer` æ”¯æŒå¹¿æ’­ç‰¹å®š topicã€‚
- [ ] **æŒ‡æ ‡æµé€‚é…å™¨**: åˆ›å»º `MetricsStreamer`ï¼Œè®¢é˜… `system.metrics.update` å¹¶æ¨é€åˆ° WSã€‚
- [ ] **å‰ç«¯é›†æˆ**: åœ¨ Admin Dashboard ä¸­æ·»åŠ å®æ—¶æ¨¡å¼å¼€å…³ï¼Œå¯¹æ¥ WS æ•°æ®æºã€‚
- [ ] **éªŒè¯**: éªŒè¯æŒ‡æ ‡æ›´æ–°å»¶è¿Ÿ < 500msã€‚

### Day 2: å¹‚ç­‰æ€§æœºåˆ¶ (Idempotency)
- [ ] **å¹‚ç­‰é”®è®¾è®¡**: å®šä¹‰ `IdempotencyKey` (Header/Message Property)ã€‚
- [ ] **çŠ¶æ€å­˜å‚¨**: ä½¿ç”¨ Redis å®ç° `IdempotencyStore` (Key + Expiry + Result)ã€‚
- [ ] **æ‹¦æˆªå™¨å®ç°**: åœ¨ MessageBus å’Œ API å±‚æ·»åŠ å¹‚ç­‰æ€§æ£€æŸ¥æ‹¦æˆªå™¨ã€‚
- [ ] **éªŒè¯**: æ¨¡æ‹Ÿé‡å¤è¯·æ±‚ï¼ŒéªŒè¯ä»…æ‰§è¡Œä¸€æ¬¡ä¸”è¿”å›ç›¸åŒç»“æœã€‚

### Day 3: RPC å»¶è¿Ÿç›´æ–¹å›¾ (RPC Latency Histogram)
- [ ] **æŒ‡æ ‡å®šä¹‰**: æ·»åŠ  Prometheus Histogram `rpc_duration_seconds` (labels: method, service, status)ã€‚
- [ ] **åŸ‹ç‚¹å®ç°**: åœ¨ `MessageBus.request()` å’Œ `reply()` è·¯å¾„ä¸­è®°å½•è€—æ—¶ã€‚
- [ ] **å…³è”è¿½è¸ª**: ä¼˜åŒ– `correlationId` ä¼ é€’ï¼Œç¡®ä¿è·¨æœåŠ¡è°ƒç”¨çš„å‡†ç¡®è®¡æ—¶ã€‚
- [ ] **éªŒè¯**: ç”Ÿæˆä¸åŒå»¶è¿Ÿçš„ RPC è°ƒç”¨ï¼ŒéªŒè¯ç›´æ–¹å›¾æ¡¶åˆ†å¸ƒ (Buckets)ã€‚

### Day 4: é‡‘ä¸é›€è·¯ç”±åŸºç¡€ (Canary Routing Foundation)
- [ ] **ä¸Šä¸‹æ–‡ä¼ æ’­**: ç¡®ä¿ `x-canary` æ ‡ç­¾åœ¨ HTTP Headers å’Œ MessageBus Metadata ä¸­é€ä¼ ã€‚
- [ ] **åŠ æƒè·¯ç”±**: å®ç° `WeightedRouter`ï¼Œæ”¯æŒæŒ‰ç™¾åˆ†æ¯”å°†æµé‡å¯¼å‘å¸¦æœ‰ `canary` æ ‡ç­¾çš„å®ä¾‹/æ’ä»¶ã€‚
- [ ] **é…ç½®ç®¡ç†**: æ·»åŠ åŠ¨æ€é…ç½® API `POST /api/admin/canary/config` (è®¾ç½®æƒé‡/ç”¨æˆ·ç™½åå•)ã€‚
- [ ] **éªŒè¯**: å•å…ƒæµ‹è¯•éªŒè¯æµé‡åˆ†é…æ¯”ä¾‹å‡†ç¡®æ€§ã€‚

### Day 5: é›†æˆä¸éªŒæ”¶ (Integration & Verification)
- [ ] **E2E æµ‹è¯•**: ç¼–å†™æµ‹è¯•ç”¨ä¾‹è¦†ç›– "å¹‚ç­‰é‡è¯•" å’Œ "å®æ—¶æŒ‡æ ‡æ¨é€"ã€‚
- [ ] **æ€§èƒ½å›å½’**: ç¡®ä¿å¹‚ç­‰æ€§æ£€æŸ¥å’Œç›´æ–¹å›¾è®°å½•ä¸æ˜¾è‘—å¢åŠ ç³»ç»Ÿå»¶è¿Ÿã€‚
- [ ] **æ–‡æ¡£æ›´æ–°**: æ›´æ–° API æ–‡æ¡£å’Œæ¶æ„å›¾ã€‚

---

## âœ… å®Œæˆæ ‡å‡†

### 1. å®æ—¶æ€§
- [ ] Admin Dashboard æŒ‡æ ‡æ›´æ–°é¢‘ç‡è¾¾åˆ°ç§’çº§ï¼Œä¸”æ— é¡µé¢åˆ·æ–°ã€‚

### 2. å¯é æ€§
- [ ] é‡å¤æäº¤çš„ POST è¯·æ±‚ (å¸¦ç›¸åŒ Idempotency-Key) 100% è¿”å›ç¼“å­˜ç»“æœï¼Œä¸è§¦å‘ä¸šåŠ¡é€»è¾‘ã€‚

### 3. å¯è§‚æµ‹æ€§
- [ ] Prometheus ä¸­å¯è§è¯¦ç»†çš„ RPC å»¶è¿Ÿåˆ†å¸ƒ (P50/P90/P99)ã€‚

### 4. çµæ´»æ€§
- [ ] å¯é€šè¿‡ API åŠ¨æ€è°ƒæ•´é‡‘ä¸é›€æµé‡æ¯”ä¾‹ (0-100%)ã€‚
