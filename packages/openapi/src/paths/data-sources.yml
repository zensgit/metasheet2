paths:
  /api/data-sources:
    get:
      summary: List data sources
      security: [ { bearerAuth: [] } ]
      responses:
        '200': { description: OK }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    post:
      summary: Create data source
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema: { type: object }
      responses:
        '201': { description: Created }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/data-sources/{id}:
    get:
      summary: Get data source
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: OK }
        '404': { $ref: '#/components/responses/NotFound' }
    put:
      summary: Update data source
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema: { type: object }
      responses:
        '200': { description: OK }
        '400': { $ref: '#/components/responses/ValidationError' }
        '404': { $ref: '#/components/responses/NotFound' }
    delete:
      summary: Delete data source
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: OK }
        '404': { $ref: '#/components/responses/NotFound' }
  /api/data-sources/{id}/connect:
    post:
      summary: Connect data source
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: OK }
  /api/data-sources/{id}/disconnect:
    post:
      summary: Disconnect data source
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: OK }
  /api/data-sources/{id}/test:
    get:
      summary: Test data source connection
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: OK }
  /api/data-sources/health:
    get:
      summary: Data sources health check
      security: [ { bearerAuth: [] } ]
      responses:
        '200': { description: OK }
  /api/data-sources/{id}/query:
    post:
      summary: Run SQL query
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                sql: { type: string }
                params:
                  type: array
                  items: {}
              required: [sql]
      responses:
        '200': { description: OK }
  /api/data-sources/{id}/select:
    post:
      summary: Select from table
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                table: { type: string }
                select:
                  type: array
                  items: { type: string }
                where: { type: object }
                orderBy:
                  type: array
                  items:
                    type: object
                    properties:
                      column: { type: string }
                      direction: { type: string }
                limit: { type: integer }
                offset: { type: integer }
              required: [table]
      responses:
        '200': { description: OK }
  /api/data-sources/{id}/schema:
    get:
      summary: Get data source schema
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200': { description: OK }
  /api/data-sources/{id}/tables/{table}:
    get:
      summary: Get table schema
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
        - in: path
          name: table
          required: true
          schema: { type: string }
      responses:
        '200': { description: OK }
