paths:
  /api/attendance/punch:
    x-plugin: plugin-attendance
    post:
      summary: Punch attendance (check in/out)
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                eventType:
                  type: string
                  enum: [check_in, check_out]
                occurredAt:
                  type: string
                  format: date-time
                timezone:
                  type: string
                source:
                  type: string
                location:
                  type: object
                meta:
                  type: object
                orgId:
                  type: string
              required: [eventType]
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      event: { $ref: '#/components/schemas/AttendanceEvent' }
                      record: { $ref: '#/components/schemas/AttendanceRecord' }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/records:
    x-plugin: plugin-attendance
    get:
      summary: List attendance records
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: query
          name: userId
          schema: { type: string }
        - in: query
          name: orgId
          schema: { type: string }
        - in: query
          name: from
          schema: { type: string, format: date }
        - in: query
          name: to
          schema: { type: string, format: date }
        - in: query
          name: page
          schema: { type: integer, default: 1 }
        - in: query
          name: pageSize
          schema: { type: integer, default: 50 }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items: { $ref: '#/components/schemas/AttendanceRecord' }
                      total: { type: integer }
                      page: { type: integer }
                      pageSize: { type: integer }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/summary:
    x-plugin: plugin-attendance
    get:
      summary: Attendance summary
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: query
          name: userId
          schema: { type: string }
        - in: query
          name: orgId
          schema: { type: string }
        - in: query
          name: from
          schema: { type: string, format: date }
        - in: query
          name: to
          schema: { type: string, format: date }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceSummary' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/requests:
    x-plugin: plugin-attendance
    post:
      summary: Create attendance adjustment request
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                workDate:
                  type: string
                  format: date
                requestType:
                  type: string
                  enum: [missed_check_in, missed_check_out, time_correction, leave, overtime]
                requestedInAt:
                  type: string
                  format: date-time
                requestedOutAt:
                  type: string
                  format: date-time
                reason:
                  type: string
                leaveTypeId:
                  type: string
                leaveTypeCode:
                  type: string
                overtimeRuleId:
                  type: string
                overtimeRuleName:
                  type: string
                minutes:
                  type: integer
                attachmentUrl:
                  type: string
                approvalFlowId:
                  type: string
                orgId:
                  type: string
              required: [workDate, requestType]
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      request: { $ref: '#/components/schemas/AttendanceRequest' }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    get:
      summary: List attendance requests
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: query
          name: userId
          schema: { type: string }
        - in: query
          name: orgId
          schema: { type: string }
        - in: query
          name: status
          schema: { type: string }
        - in: query
          name: from
          schema: { type: string, format: date }
        - in: query
          name: to
          schema: { type: string, format: date }
        - in: query
          name: page
          schema: { type: integer, default: 1 }
        - in: query
          name: pageSize
          schema: { type: integer, default: 50 }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items: { $ref: '#/components/schemas/AttendanceRequest' }
                      total: { type: integer }
                      page: { type: integer }
                      pageSize: { type: integer }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/requests/{id}/approve:
    x-plugin: plugin-attendance
    post:
      summary: Approve attendance request
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                comment: { type: string }
                metadata: { type: object }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      requestId: { type: string }
                      status: { type: string }
                      orgId: { type: string }
                      userId: { type: string }
                      record: { $ref: '#/components/schemas/AttendanceRecord' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/requests/{id}/reject:
    x-plugin: plugin-attendance
    post:
      summary: Reject attendance request
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                comment: { type: string }
                metadata: { type: object }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      requestId: { type: string }
                      status: { type: string }
                      orgId: { type: string }
                      userId: { type: string }
                      record:
                        nullable: true
                        allOf:
                          - { $ref: '#/components/schemas/AttendanceRecord' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/requests/{id}/cancel:
    x-plugin: plugin-attendance
    post:
      summary: Cancel attendance request
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                comment: { type: string }
                metadata: { type: object }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      requestId: { type: string }
                      status: { type: string }
                      orgId: { type: string }
                      userId: { type: string }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/rules/default:
    x-plugin: plugin-attendance
    get:
      summary: Get default attendance rule
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: query
          name: orgId
          schema: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceRule' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    put:
      summary: Update default attendance rule
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name: { type: string }
                timezone: { type: string }
                workStartTime: { type: string }
                workEndTime: { type: string }
                lateGraceMinutes: { type: integer }
                earlyGraceMinutes: { type: integer }
                roundingMinutes: { type: integer }
                workingDays:
                  type: array
                  items: { type: integer }
                orgId: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceRule' }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/shifts:
    x-plugin: plugin-attendance
    get:
      summary: List attendance shifts
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: query
          name: orgId
          schema: { type: string }
        - in: query
          name: page
          schema: { type: integer, default: 1 }
        - in: query
          name: pageSize
          schema: { type: integer, default: 50 }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items: { $ref: '#/components/schemas/AttendanceShift' }
                      total: { type: integer }
                      page: { type: integer }
                      pageSize: { type: integer }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    post:
      summary: Create attendance shift
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name: { type: string }
                timezone: { type: string }
                workStartTime: { type: string }
                workEndTime: { type: string }
                lateGraceMinutes: { type: integer }
                earlyGraceMinutes: { type: integer }
                roundingMinutes: { type: integer }
                workingDays:
                  type: array
                  items: { type: integer }
                orgId: { type: string }
              required: [name]
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceShift' }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/shifts/{id}:
    x-plugin: plugin-attendance
    put:
      summary: Update attendance shift
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name: { type: string }
                timezone: { type: string }
                workStartTime: { type: string }
                workEndTime: { type: string }
                lateGraceMinutes: { type: integer }
                earlyGraceMinutes: { type: integer }
                roundingMinutes: { type: integer }
                workingDays:
                  type: array
                  items: { type: integer }
                orgId: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceShift' }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    delete:
      summary: Delete attendance shift
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      id: { type: string }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/assignments:
    x-plugin: plugin-attendance
    get:
      summary: List attendance shift assignments
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: query
          name: orgId
          schema: { type: string }
        - in: query
          name: userId
          schema: { type: string }
        - in: query
          name: page
          schema: { type: integer, default: 1 }
        - in: query
          name: pageSize
          schema: { type: integer, default: 50 }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            assignment: { $ref: '#/components/schemas/AttendanceShiftAssignment' }
                            shift: { $ref: '#/components/schemas/AttendanceShift' }
                      total: { type: integer }
                      page: { type: integer }
                      pageSize: { type: integer }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    post:
      summary: Create attendance shift assignment
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                userId: { type: string }
                shiftId: { type: string }
                startDate: { type: string, format: date }
                endDate: { type: string, format: date, nullable: true }
                isActive: { type: boolean }
                orgId: { type: string }
              required: [userId, shiftId, startDate]
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      assignment: { $ref: '#/components/schemas/AttendanceShiftAssignment' }
                      shift: { $ref: '#/components/schemas/AttendanceShift' }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/assignments/{id}:
    x-plugin: plugin-attendance
    put:
      summary: Update attendance shift assignment
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                userId: { type: string }
                shiftId: { type: string }
                startDate: { type: string, format: date }
                endDate: { type: string, format: date, nullable: true }
                isActive: { type: boolean }
                orgId: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      assignment: { $ref: '#/components/schemas/AttendanceShiftAssignment' }
                      shift: { $ref: '#/components/schemas/AttendanceShift' }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    delete:
      summary: Delete attendance shift assignment
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      id: { type: string }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/holidays:
    x-plugin: plugin-attendance
    get:
      summary: List attendance holidays
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: query
          name: orgId
          schema: { type: string }
        - in: query
          name: from
          schema: { type: string, format: date }
        - in: query
          name: to
          schema: { type: string, format: date }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items: { $ref: '#/components/schemas/AttendanceHoliday' }
                      total: { type: integer }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    post:
      summary: Create attendance holiday
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                date: { type: string, format: date }
                name: { type: string, nullable: true }
                isWorkingDay: { type: boolean }
                orgId: { type: string }
              required: [date]
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceHoliday' }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/holidays/{id}:
    x-plugin: plugin-attendance
    put:
      summary: Update attendance holiday
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                date: { type: string, format: date }
                name: { type: string, nullable: true }
                isWorkingDay: { type: boolean }
                orgId: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceHoliday' }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    delete:
      summary: Delete attendance holiday
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      id: { type: string }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/settings:
    x-plugin: plugin-attendance
    get:
      summary: Get attendance settings
      security: [ { bearerAuth: [] } ]
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceSettings' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    put:
      summary: Update attendance settings
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/AttendanceSettings' }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceSettings' }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/export:
    x-plugin: plugin-attendance
    get:
      summary: Export attendance records as CSV
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: query
          name: userId
          schema: { type: string }
        - in: query
          name: orgId
          schema: { type: string }
        - in: query
          name: from
          schema: { type: string, format: date }
        - in: query
          name: to
          schema: { type: string, format: date }
        - in: query
          name: limit
          schema: { type: integer, default: 1000, maximum: 5000 }
      responses:
        '200':
          description: CSV export
          content:
            text/csv:
              schema:
                type: string
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/reports/requests:
    x-plugin: plugin-attendance
    get:
      summary: Attendance request report
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: query
          name: userId
          schema: { type: string }
        - in: query
          name: orgId
          schema: { type: string }
        - in: query
          name: from
          schema: { type: string, format: date }
        - in: query
          name: to
          schema: { type: string, format: date }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items: { $ref: '#/components/schemas/AttendanceRequestReportItem' }
                      from: { type: string, format: date }
                      to: { type: string, format: date }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/leave-types:
    x-plugin: plugin-attendance
    get:
      summary: List leave types
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: query
          name: orgId
          schema: { type: string }
        - in: query
          name: isActive
          schema: { type: boolean }
        - in: query
          name: page
          schema: { type: integer, default: 1 }
        - in: query
          name: pageSize
          schema: { type: integer, default: 50 }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items: { $ref: '#/components/schemas/AttendanceLeaveType' }
                      total: { type: integer }
                      page: { type: integer }
                      pageSize: { type: integer }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    post:
      summary: Create leave type
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                code: { type: string }
                name: { type: string }
                requiresApproval: { type: boolean }
                requiresAttachment: { type: boolean }
                defaultMinutesPerDay: { type: integer }
                isActive: { type: boolean }
                orgId: { type: string }
              required: [code, name]
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceLeaveType' }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/leave-types/{id}:
    x-plugin: plugin-attendance
    put:
      summary: Update leave type
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                code: { type: string }
                name: { type: string }
                requiresApproval: { type: boolean }
                requiresAttachment: { type: boolean }
                defaultMinutesPerDay: { type: integer }
                isActive: { type: boolean }
                orgId: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceLeaveType' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    delete:
      summary: Delete leave type
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      id: { type: string }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/overtime-rules:
    x-plugin: plugin-attendance
    get:
      summary: List overtime rules
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: query
          name: orgId
          schema: { type: string }
        - in: query
          name: isActive
          schema: { type: boolean }
        - in: query
          name: page
          schema: { type: integer, default: 1 }
        - in: query
          name: pageSize
          schema: { type: integer, default: 50 }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items: { $ref: '#/components/schemas/AttendanceOvertimeRule' }
                      total: { type: integer }
                      page: { type: integer }
                      pageSize: { type: integer }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    post:
      summary: Create overtime rule
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name: { type: string }
                minMinutes: { type: integer }
                roundingMinutes: { type: integer }
                maxMinutesPerDay: { type: integer }
                requiresApproval: { type: boolean }
                isActive: { type: boolean }
                orgId: { type: string }
              required: [name]
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceOvertimeRule' }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/overtime-rules/{id}:
    x-plugin: plugin-attendance
    put:
      summary: Update overtime rule
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name: { type: string }
                minMinutes: { type: integer }
                roundingMinutes: { type: integer }
                maxMinutesPerDay: { type: integer }
                requiresApproval: { type: boolean }
                isActive: { type: boolean }
                orgId: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceOvertimeRule' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    delete:
      summary: Delete overtime rule
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      id: { type: string }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/approval-flows:
    x-plugin: plugin-attendance
    get:
      summary: List approval flows
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: query
          name: orgId
          schema: { type: string }
        - in: query
          name: requestType
          schema: { type: string }
        - in: query
          name: isActive
          schema: { type: boolean }
        - in: query
          name: page
          schema: { type: integer, default: 1 }
        - in: query
          name: pageSize
          schema: { type: integer, default: 50 }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items: { $ref: '#/components/schemas/AttendanceApprovalFlow' }
                      total: { type: integer }
                      page: { type: integer }
                      pageSize: { type: integer }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    post:
      summary: Create approval flow
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name: { type: string }
                requestType: { type: string }
                steps:
                  type: array
                  items: { $ref: '#/components/schemas/AttendanceApprovalStep' }
                isActive: { type: boolean }
                orgId: { type: string }
              required: [name, requestType]
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceApprovalFlow' }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/approval-flows/{id}:
    x-plugin: plugin-attendance
    put:
      summary: Update approval flow
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name: { type: string }
                requestType: { type: string }
                steps:
                  type: array
                  items: { $ref: '#/components/schemas/AttendanceApprovalStep' }
                isActive: { type: boolean }
                orgId: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceApprovalFlow' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    delete:
      summary: Delete approval flow
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      id: { type: string }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/rotation-rules:
    x-plugin: plugin-attendance
    get:
      summary: List rotation rules
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: query
          name: orgId
          schema: { type: string }
        - in: query
          name: isActive
          schema: { type: boolean }
        - in: query
          name: page
          schema: { type: integer, default: 1 }
        - in: query
          name: pageSize
          schema: { type: integer, default: 50 }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items: { $ref: '#/components/schemas/AttendanceRotationRule' }
                      total: { type: integer }
                      page: { type: integer }
                      pageSize: { type: integer }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    post:
      summary: Create rotation rule
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name: { type: string }
                timezone: { type: string }
                shiftSequence:
                  type: array
                  items: { type: string }
                isActive: { type: boolean }
                orgId: { type: string }
              required: [name, shiftSequence]
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceRotationRule' }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/rotation-rules/{id}:
    x-plugin: plugin-attendance
    put:
      summary: Update rotation rule
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name: { type: string }
                timezone: { type: string }
                shiftSequence:
                  type: array
                  items: { type: string }
                isActive: { type: boolean }
                orgId: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data: { $ref: '#/components/schemas/AttendanceRotationRule' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    delete:
      summary: Delete rotation rule
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      id: { type: string }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/rotation-assignments:
    x-plugin: plugin-attendance
    get:
      summary: List rotation assignments
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: query
          name: orgId
          schema: { type: string }
        - in: query
          name: page
          schema: { type: integer, default: 1 }
        - in: query
          name: pageSize
          schema: { type: integer, default: 50 }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items: { $ref: '#/components/schemas/AttendanceRotationAssignmentItem' }
                      total: { type: integer }
                      page: { type: integer }
                      pageSize: { type: integer }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    post:
      summary: Create rotation assignment
      security: [ { bearerAuth: [] } ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                userId: { type: string }
                rotationRuleId: { type: string }
                startDate: { type: string, format: date }
                endDate: { type: string, format: date, nullable: true }
                isActive: { type: boolean }
                orgId: { type: string }
              required: [userId, rotationRuleId, startDate]
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      assignment: { $ref: '#/components/schemas/AttendanceRotationAssignment' }
                      rotation: { $ref: '#/components/schemas/AttendanceRotationRule' }
        '400': { $ref: '#/components/responses/ValidationError' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
  /api/attendance/rotation-assignments/{id}:
    x-plugin: plugin-attendance
    put:
      summary: Update rotation assignment
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                userId: { type: string }
                rotationRuleId: { type: string }
                startDate: { type: string, format: date }
                endDate: { type: string, format: date, nullable: true }
                isActive: { type: boolean }
                orgId: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      assignment: { $ref: '#/components/schemas/AttendanceRotationAssignment' }
                      rotation: { $ref: '#/components/schemas/AttendanceRotationRule' }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
    delete:
      summary: Delete rotation assignment
      security: [ { bearerAuth: [] } ]
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok: { type: boolean }
                  data:
                    type: object
                    properties:
                      id: { type: string }
        '401': { $ref: '#/components/responses/Unauthorized' }
        '403': { $ref: '#/components/responses/Forbidden' }
